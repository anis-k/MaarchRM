<!--#
This file is part of the digitalResource package.
(c) Maarch Alexis Ragot <alexis.ragot@maarch.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.
#-->

<div class="container-fluid">
    <div class="page-header">
        <h1>
            <i class="fa fa-list-ul"></i>
            Profile management
        </h1>
    </div>
</div>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">
            <div class="panel panel-primary">
                <div class="panel-heading clearfix">
                    <div class="pull-left">
                        <h4><?merge profiles.count() ?> Profiles</h4>
                    </div>
                    <div class="pull-right">
                        <button type="button" class="btn btn-default" id="addProfileBtn" title="Add"><i class="fa fa-plus fa-fw"></i>&nbsp;Add</button>
                    </div>
                </div>
                <div class="panel-body" style="padding: 0;">
                    <table class="table dataTable">
                        <thead>
                            <tr>
                                <th>Profile name</th>
                                <th>Number of repositories</th>
                                <th>Number of metadatas</th>
                                <th>Number of formats</th>
                                <th style="width:1%;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <?merge profiles ?>
                            <tr>
                                <td><?merge .profileName ?></td>
                                <td><?merge .profileRepository.count() ?></td>
                                <td><?merge .profileMetadata.count() ?></td>
                                <td><?merge .profileFormat.count() ?></td>
                                <td class="action_btn">
                                    <div class="btn-group pull-right">
                                        <button type="button" id="modifyProfileBtn" data-profileId="[?merge .profileId ?]" class="btn btn-warning">
                                            <span class="fa fa-fw fa-edit"></span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- dataTable -->
<script src="/public/js/dataTables_1.9.4/dataTables.min.js"></script>

<script type="application/javascript">
    $("#modifyProfileBtn").on("click", function(){
        load('/digitalResource/adminProfile/edit/' + $(this.attr("data-profileId")));
    });
    
    $("#addProfileBtn").on("click", function(){
        load("/digitalResource/adminProfile/edit");
    });
</script>
